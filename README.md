
<h1>Экзамен по предмету "Компьютерные сети"</h1>    
<li>Сдающий: <b>Ващук Лев Александрович  </b>  
<li>Группа: <b>з5130902/10202</b>  
<li>Вопрос: <b>Вопрос 9. </b> 

[Задачи транспортного уровня](#транспортный-уровень-задачи-транспортного-уровня)
[Транспортный уровень](#транспортный-уровень-задачи-транспортного-уровня)
[Протокол UDP](#протокол-udp)
[Протокол TCP](#протокол-tcp-формат-заголовка)
[Интерфейс сокетов](#транспортный-уровень-задачи-транспортного-уровня)
[Сокеты Беркли](#транспортный-уровень-задачи-транспортного-уровня)
</li>
  

## Транспортный уровень, задачи транспортного уровня
Чтобы раскрыть тему транспортного уровня в модели OSI надо углубиться в саму OSI. <br>  

  
Сетевая модель OSI (The Open Systems Interconnection model) — сетевая модель стека сетевых протоколов  OSI/ISO. _Посредством данной модели различные сетевые устройства могут взаимодействовать друг с другом._ 
_**Самым важным для нас моментом является определение различных уровней взаимодействия систем. Каждый уровень выполняет присущие ему функции.**_
Модель становится намного понятней, когда мы можем ее визуализировать, как на рисунке 1.
<img src="https://skillbox.ru/upload/setka_images/12504801092022_ac4aa360577ec93ee375b17d290f20d8751c3719.png">

<p align=center>Рисунк 1 - наглядный пример модели OSI</p>

Думаю будет очень полезно описать в кратце каждый уровень для более четкой общей картины
<li>Прикладной уровень

_Прикладной уровень отвечает за определение конкретного типа самого приложения. Например, браузер, контейнер сервлетов, веб сервер, база данных._</li>
<li>Уровень представления

_Этот уровень отвечает за преобразование протоколов и кодирование/декодирование данных. Запросы приложений, полученные с уровня приложений, он преобразует в формат для передачи по сети, а полученные из сети данные преобразует в формат, понятный приложениям. **Из реальной жизни можно привести пример строковый тип данных, в которых лежат  SQL запросы, в которые через знак `?` в синтаксисе языка передают параметры. Прошу обратить внимание оператор `WHERE`, в ниже приведенном запросе**_
```
/---VisualFoxPro 9---/
PRIVATE pcExampleVar1, pnExampleVar2, pnExampleVar3

pcExampleVar1 = alltrim(thisform.txtField1.value)
pnExampleVar2 = thisform.txtField2.value
pnExampleVar3 = thisform.txtField3.value

PRIVATE lcStatement
lcStatement = ";
SELECT DISTINCT a.field1;
FROM a mytable;
WHERE a.otherField1=?pcExampleVar1 AND;
a.otherField2=?pnExampleVar2 AND;
a.otherField3=?pnExampleVar3"
```
Такой запрос будет обработан вашим драйвером СУБД. В моем случае ODBC (The Microsoft Open Database Connectivity (ODBC) обработает этот запрос уже после компиляции программы и подставит параметры из указаных переменных.
</li>
<li>Сеансовый уровень

Сеансовый уровень предназначен для установления, поддержания и завершения соединения между приложениями участников соединения. В качестве примера можно привести GSM. Сеансовый уровень используется между мобильным телефоном MS и коммутатором мобильной сети MSC для установления исходящего либо входящего соединения</li>
<li name="transport">Транспортный уровень

Четвертый уровень сетевой модели OSI, **предназначен для доставки данных**.  Работает в обоих направлениях. Способен принимать и отсылать информацию. Предоставляет сам механизм передачи.

Транспортный уровень модели OSI (равно как и стека протоколов [TCP](#протокол-tcp-формат-заголовка)/IP) обеспечивает следующие возможности:
1. Отслеживание индивидуальных сеансов общения между приложениями на передающем и принимающем устройствах;
2. Сегментация данных (разбиение больших порций данных на сегменты для индивидуальной отсылки по сети, сборка этих сегментов после получения);
3. Идентификация приложений, передающих и принимающих данные.

Траспортный уровень имеет 2 режима работы: [TCP](#протокол-tcp-формат-заголовка) и [UDP](#протокол-udp), которые будут рассмотрены ниже, **но ради полноты пункта можно сказать, что TCP более надеждый режим, но не такой быстрый как датаграммы UDP, которые, например, используются в стриминговом сервисе Twitch при проведении трансляций видео.** 



</li>
<li>Сетевой уровень

Этот уровень прежде всего должен прокладывать маршрут между узлами. **Тут мы хотим передавать данные по большой сети, то есть не факт, что напрямую, а значит придется осуществлять routing.** 
В больших сетях топология постоянно изменяется, поэтому необходимо изменять стратегии доставки сообщений в зависимости от этих изменений, а также в зависимости от загруженности сети. Для решения этой задачи существуют алгоритмы маршрутизации, которые решают куда нужно отправить сообщение.
</li>

<li>Канальный уровень

Второй уровень сетевой модели SI  предназначенный для передачи данных узлам, находящимся в том же сегменте локальной сети.
</li>
<li>Физический уровень

Нижний уровень модели OSI — физическая и электрическая среда для передачи данных. 
***Хочу отметить, что этот уровень интересен тем, что именно на него больше всего может повлиять обычный пользователь. Речь идет про сетевой адаптер, который несет на себе шифратор и дешифратор  информации. Просто докупив более продвинутую сетевую карту можно, например, повлиять на ping в online видеоиграх.***
</li>




## Протокол UDP
User Datagram Protocol — протокол пользовательских датаграмм. Один из немногих ключевых элементов набора сетевых протоколов для Интернета. Считаю, что надо сразу противопоставить этот протокол протоколу [TCP](#протокол-tcp-формат-заголовка) и определить разницу между ними

 - *С UDP компьютерные приложения могут посылать сообщения (датаграммы) другим хостам **без необходимости предварительного сообщения для установки специальных каналов** передачи данных.*
 - *C TCP предоставляет поток данных с **предварительной установкой соединения, осуществляет повторный запрос данных в случае потери данных и устраняет дублирование при получении двух копий одного пакета**, гарантируя тем самым целостность передаваемых данных и уведомляет отправителя о результатах передачи.*
 
 Теперь, когда линия между протоколами проведена давайте посмотрим во внутрь самого главного UDP - его датаграмму на рисунке 2.

<p align=center>
<img  src="https://www.luckycom.ru/wp-content/uploads/2018/06/header-UDP.gif">
</p>

<p align=center>Рисунк 2 - внутренности датаграммы</p>

Заголовок UDP всегда имеет длину 64 бита. Поля, определённые в сегменте UDP включают следующие 

 1. *Порт отправителя (Source port): номер порта источника(16 бит)*
 2. *Порт получателя (Destination port): номер порта назначения (16 бит)*
 3. *Длина сообщения (Length): длина заголовка UDP и данных UDP (16 бит)*
 4. *Контрольная сумма (Checksum): вычисленная контрольная сумма полей заголовка и данных (16 бит)*.
 Любопытно, что при всей сути датаграммы в ее заголовке все равно есть чексумма.
 5. *Данные (Data): данные протокола вышележащего уровня (upper-layer protocol – ULP) (переменная длина)*
 
 Заголовок несет в себе 64 бита информации и используется в UDP: TFTP, SNMP (почта), Network File System (NFS, удаленные директории) и Domain Name System (DNS).
 


## Протокол TCP, формат заголовка

Долгое время я не понимал до конца что такое TCP и стэки протоколов, которые с ним связаны. Постоянно шла речь про какие-то "пакеты". **В видеоиграх часто можно услышать про "патерю пакетов"**, а что это за пакеты, что они в себе содержат я не понимал. Уже позже начальник на работе мне поверхностно прояснил ситуацию, но теперь стоит посмотреть еще грубже.
Думаю, что хорошим примером будет связка HTTP и TCP/IP. 
TCP - протокол управления передачей <ins>данных</ins>, а HTTP в этом случае являются <ins>данными</ins>.

***Протокол передачи данных HTTP просит TCP установить соединение для передачи запросов. TCP  в этой ситуации является мостом между отправителем и получателем (опираясь на IP адресацию). Запрос HTTP оборачивается в пакеты в соотвествии с TCP заголовком, который продемонстрирован на рисунке 3.***

Механизм TCP предоставляет поток данных с предварительной установкой соединения, осуществляет повторный запрос данных в случае потери данных и устраняет дублирование при получении двух копий одного пакета, **гарантируя тем самым (в отличие от UDP) целостность передаваемых данных** и уведомление отправителя о результатах передачи.

https://aws.amazon.com/ru/what-is/osi-model/  
<h2>Интерфейс сокетов</h2>  
  
<h2>Сокеты Беркли</h2>  
https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D0%BA%D0%B5%D1%82%D1%8B_%D0%91%D0%B5%D1%80%D0%BA%D0%BB%D0%B8
